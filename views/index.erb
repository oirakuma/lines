<html>
<head>
<link rel="stylesheet" href="vendor/jquery.mobile-1.4.5.min.css">
<link rel="stylesheet" href="lines.css">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<meta charset="UTF-8">
</head>
<body>
  <div data-role="page" id="top">
    <h1>Lines</h1>
    <% if session[:username] %>
    ようこそ <%= session[:username] %> さん
    <% end %>
    <div id="animation" align="center"></div>
    <a href="#one" class="ui-btn">ゲーム開始</a>
    <a href="#ranking" class="ui-btn">ランキング</a>
    <% if session[:username] %>
    <a href="logout" class="ui-btn">ログアウト</a>
    <% else %>
    <a href="#login" class="ui-btn">ログイン</a>
    <% end %>
  </div>

  <div data-role="page" id="one">
    <div id="next"></div>
    <div id="score"></div>
    <div class="break"></div>
    <div id="content"></div>
  </div>

  <div data-role="page" id="ranking">
    <ol data-role="listview">
    <% @scores.each do |k,v| %>
      <li><%= k %><span class="ui-li-count"><%= v %></span></li>
    <% end %>
    </ol>
    <a href="#top" class="ui-btn">戻る</a>
  </div>

  <div data-role="page" id="login">
    <form action="/login" method="POST">
    <table>
    <tr><td>ユーザ名</td><td><input type="text" name="username"></td></tr>
    <tr><td>パスワード</td><td><input type="password" name="password"></td></tr>
    </table>
    <input type="submit" value="ログイン" class="ui-btn">
    </form>
    <a href="#top" class="ui-btn">戻る</a>
  </div>
</div>

<script src="vendor/jquery.min.js"></script>
<script src="vendor/jquery.mobile-1.4.5.min.js"></script>
<script src="vendor/jquery-ui.min.js"></script>
<script src="vendor/jquery.jrumble.1.3.min.js"></script>
<script src="lines.js"></script>
<script>
function gemAnimation(id) {
  if (id > 7) return;
  var img = $('<img src="images/gem0'+id+'.svg">').css("width", 40);
  $("#animation").prepend(img);
  img.effect("bounce", "slow", function(){
    gemAnimation(id+1);
  });
}
$(document).ready(function(){
  gemAnimation(1);
});
</script>
</body>
</html>
